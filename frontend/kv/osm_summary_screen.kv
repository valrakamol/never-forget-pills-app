# frontend/kv/osm_summary_screen.kv
<OsmSummaryScreen>:
    summary_layout: summary_layout
    risky_list_layout: risky_list_layout

    BoxLayout:
        orientation: 'vertical'
        
        canvas.before:
            Color:
                rgba: (245/255, 245/255, 245/255, 1) # สีเทาอ่อน (F5F5F5)
            Rectangle:
                pos: self.pos
                size: self.size
        
        # --- Header ---
        BoxLayout:
            size_hint_y: None
            height: '80dp'
            canvas.before:
                Color:
                    rgba: (119/255, 217/255, 161/255, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: "สรุปภาพรวมสุขภาพรายเดือน"
                font_name: "THFont"
                font_size: "22sp"
                bold: True
        
        # --- ส่วนเนื้อหา ---
        ScrollView:
            GridLayout:
                cols: 1
                adaptive_height: True
                padding: "15dp"
                spacing: "15dp"

                # 1. ส่วนสรุปตัวเลข
                GridLayout:
                    id: summary_layout
                    cols: 3
                    size_hint_y: None
                    height: '100dp'
                    spacing: '10dp'

                # 2. ส่วนรายชื่อกลุ่มเสี่ยง
                Label:
                    text: "รายชื่อกลุ่มที่ต้องติดตาม"
                    font_name: "THFont"
                    font_size: "20sp"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]
                    color: (0,0,0,1)
                    
                GridLayout:
                    id: risky_list_layout
                    cols: 1
                    adaptive_height: True
                    spacing: '5dp'

        # Bottom Navigation Tabs (สำหรับผู้สูงอายุ)
        BoxLayout:
            id: bottom_nav
            orientation: 'horizontal'
            size_hint_y: None
            height: '56dp'
            spacing: 0
            canvas.before:
                Color:
                    rgba: (119/255, 217/255, 161/255, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            # Tab 1: รายชื่อผู้สูงอายุ
            Button:
                background_normal: ''
                background_color: 0,0,0,0
                on_release: root.manager.current = 'osm_screen'
                size_hint_x: 1
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    orientation: 'vertical'
                    padding: [0, '2dp', 0, 0]
                    spacing: '2dp'
                    Image:
                        source: 'assets/icon_list.png'
                        size_hint: None, None
                        size: '28dp', '28dp'
                        pos_hint: {'center_x': 0.5}
                    Label:
                        text: 'รายชื่อผู้สูงอายุ'
                        font_name: 'THFont'
                        font_size: '12sp'
                        color: 1, 1, 1, 1
                        halign: 'center'

            # Tab 2: แดชบอร์ด
            Button:
                background_normal: ''
                background_color: 0,0,0,0
                on_release: root.manager.current = 'osm_summary_screen'
                size_hint_x: 1
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    orientation: 'vertical'
                    padding: [0, '2dp', 0, 0]
                    spacing: '2dp'
                    Image:
                        source: 'assets/icon_dashboard_active.png'
                        size_hint: None, None
                        size: '28dp', '28dp'
                        pos_hint: {'center_x': 0.5}
                    Label:
                        text: 'แดชบอร์ด'
                        font_name: 'THFont'
                        font_size: '12sp'
                        color: 0, 0, 0, 1
                        halign: 'center'

            # Tab 3: โปรไฟล์
            Button:
                background_normal: ''
                background_color: 0,0,0,0
                on_release: root.manager.current = 'osm_profile_screen'
                size_hint_x: 1
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    orientation: 'vertical'
                    padding: [0, '2dp', 0, 0]
                    spacing: '2dp'
                    Image:
                        source: 'assets/icon_profile.png'
                        size_hint: None, None
                        size: '28dp', '28dp'
                        pos_hint: {'center_x': 0.5}
                    Label:
                        text: 'โปรไฟล์'
                        font_name: 'THFont'
                        font_size: '12sp'
                        color: 1, 1, 1, 1
                        halign: 'center'