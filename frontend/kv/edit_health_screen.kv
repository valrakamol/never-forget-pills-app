# frontend/kv/edit_health_screen.kv

# --- สร้าง Rule กลางสำหรับช่องกรอกข้อมูล ---
<InputRow@BoxLayout>:
    size_hint_y: None
    height: '56dp'
    padding: '16dp', 0
    spacing: '8dp'
    canvas.before:
        Color:
            rgba: 0.92, 0.92, 0.92, 1 # สีเทาช่องกรอก
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [28,]

<EditHealthScreen>:
    # เชื่อม Property ของ Python เข้ากับ Widget ที่มี id
    header_label: header_label
    systolic_input: systolic_field
    diastolic_input: diastolic_field
    weight_input: weight_field
    pulse_input: pulse_field
    notes_input: notes_field
    
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: (245/255, 245/255, 245/255, 1) # พื้นหลังสีเทาอ่อน
            Rectangle:
                pos: self.pos
                size: self.size
        
        # --- ส่วนหัว ---
        BoxLayout:
            size_hint_y: None
            height: '80dp'
            canvas.before:
                Color:
                    rgba: (119/255, 217/255, 161/255, 1) # สีเขียว
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                id: header_label
                text: 'บันทึกข้อมูลสุขภาพ'
                font_name: "THFont"
                font_size: "24sp"
                bold: True
            
        # --- ส่วนฟอร์ม ---
        ScrollView:
            GridLayout:
                cols: 1
                adaptive_height: True
                padding: "30dp"
                spacing: "20dp"

                InputRow:
                    TextInput:
                        id: systolic_field
                        hint_text: "ความดันโลหิต (ตัวบน)"
                        font_name: "THFont"
                        font_size: '16sp'
                        background_color: 0,0,0,0
                        foreground_color: 0.1, 0.1, 0.1, 1
                        input_filter: 'int'
                InputRow:
                    TextInput:
                        id: diastolic_field
                        hint_text: "ความดันโลหิต (ตัวล่าง)"
                        font_name: "THFont"
                        font_size: '16sp'
                        background_color: 0,0,0,0
                        foreground_color: 0.1, 0.1, 0.1, 1
                        input_filter: 'int'
                InputRow:
                    TextInput:
                        id: weight_field
                        hint_text: "น้ำหนัก (กิโลกรัม)"
                        font_name: "THFont"
                        font_size: '16sp'
                        background_color: 0,0,0,0
                        foreground_color: 0.1, 0.1, 0.1, 1
                        input_filter: 'float'
                InputRow:
                    TextInput:
                        id: pulse_field
                        hint_text: "ชีพจร (ครั้ง/นาที)"
                        font_name: "THFont"
                        font_size: '16sp'
                        background_color: 0,0,0,0
                        foreground_color: 0.1, 0.1, 0.1, 1
                        input_filter: 'int'
                InputRow:
                    TextInput:
                        id: notes_field
                        hint_text: "หมายเหตุเพิ่มเติม"
                        font_name: "THFont"
                        font_size: '16sp'
                        background_color: 0,0,0,0
                        foreground_color: 0.1, 0.1, 0.1, 1

        # --- ส่วนปุ่ม ---
        BoxLayout:
            size_hint_y: None
            height: '80dp'
            padding: "12dp"
            spacing: "12dp"
            
            Button:
                text: "ย้อนกลับ"
                font_name: "THFont"
                font_size: '16sp'
                background_color: 0.85, 0.85, 0.85, 1
                color: 1, 1, 1, 1
                on_release: root.go_back()

            Button:
                text: "ยืนยัน"
                font_name: "THFont"
                font_size: '16sp'
                background_color: (119/255, 217/255, 161/255, 1)
                on_release: root.save_health_data()